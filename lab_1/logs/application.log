2025-04-15 14:17:32.393 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Starting Lab1ApplicationKt using Java 20.0.2.1 with PID 3825 (/Users/nikitacerenkov/Downloads/lab_1/build/classes/kotlin/main started by nikitacerenkov in /Users/nikitacerenkov/Downloads/lab_1)
2025-04-15 14:17:32.394 [main] DEBUG c.cherenkov.lab_1.Lab1ApplicationKt - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-15 14:17:32.394 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-04-15 14:17:33.377 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-15 14:17:33.387 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-15 14:17:33.387 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-15 14:17:33.413 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-15 14:17:33.414 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 993 ms
2025-04-15 14:17:33.453 [main] DEBUG c.c.l.configs.RequestLoggingFilter - Filter 'requestLoggingFilter' configured for use
2025-04-15 14:17:33.453 [main] DEBUG c.c.lab_1.configs.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-04-15 14:17:33.504 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-15 14:17:33.505 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-04-15 14:17:34.277 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-04-15 14:17:34.696 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.2.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.3.2"}, "platform": "Java/Amazon.com Inc./20.0.2.1+10-FR"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@21dd91da, com.mongodb.Jep395RecordCodecProvider@1f251bf1, com.mongodb.KotlinCodecProvider@502b9399]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-04-15 14:17:34.706 [cluster-ClusterId{value='67fe404e435c872d37ad59f3', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=12292833, minRoundTripTimeNanos=0}
2025-04-15 14:17:34.815 [main] INFO  o.n.driver.internal.DriverFactory - Direct driver instance 311245180 created for server address localhost:7687
2025-04-15 14:17:35.038 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-04-15 14:17:35.046 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Started Lab1ApplicationKt in 2.871 seconds (process running for 3.2)
2025-04-15 14:17:47.939 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-15 14:17:47.940 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-15 14:17:47.941 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-15 14:17:47.945 [http-nio-8080-exec-2] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 7bae005c-1f7b-4510-810b-b616335d85d2: пользователь=anonymous, метод=POST, uri=/api/auth/login
2025-04-15 14:17:47.948 [http-nio-8080-exec-2] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/api/auth/login}
2025-04-15 14:17:48.125 [http-nio-8080-exec-2] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@4d514e28} - {200} ({179} мс)
2025-04-15 14:18:10.969 [http-nio-8080-exec-3] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 90c17714-9cdd-4950-85d1-1bbcace4bb43: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:18:10.970 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:18:11.024 [http-nio-8080-exec-3] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-12-01T00:00:00Z
2025-04-15 14:18:11.024 [http-nio-8080-exec-3] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-12-01T00:00:00Z
2025-04-15 14:18:11.024 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:18:11.025 [http-nio-8080-exec-3] WARN  c.c.lab_1.service.ReportService - Дата окончания в будущем: 2025-12-01T00:00:00Z
2025-04-15 14:18:11.025 [http-nio-8080-exec-3] WARN  c.c.lab_1.service.ReportService - Ошибки валидации запроса отчета: Дата окончания не может быть в будущем
2025-04-15 14:18:11.026 [http-nio-8080-exec-3] WARN  c.c.lab_1.service.ReportService - Ошибка валидации запроса: Дата окончания не может быть в будущем
2025-04-15 14:18:11.026 [http-nio-8080-exec-3] ERROR c.c.l.controllers.ReportController - Ошибка при формировании отчета: Дата окончания не может быть в будущем
2025-04-15 14:18:11.195 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@58c823b} - {500} ({225} мс)
2025-04-15 14:18:11.195 [http-nio-8080-exec-3] WARN  c.c.l.configs.RequestLoggingFilter - Ответ с ошибкой {500}: {{"status":"ERROR","message":"ÐÐ°ÑÐ° Ð¾ÐºÐ¾Ð½ÑÐ°Ð½Ð¸Ñ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ Ð² Ð±ÑÐ´ÑÑÐµÐ¼","data":[]}}
2025-04-15 14:18:25.497 [http-nio-8080-exec-5] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса d5cd6461-135f-45e8-bc87-cc3405e241b1: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:18:25.498 [http-nio-8080-exec-5] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:18:25.503 [http-nio-8080-exec-5] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-07-01T00:00:00Z
2025-04-15 14:18:25.504 [http-nio-8080-exec-5] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-07-01T00:00:00Z
2025-04-15 14:18:25.504 [http-nio-8080-exec-5] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:18:25.504 [http-nio-8080-exec-5] WARN  c.c.lab_1.service.ReportService - Дата окончания в будущем: 2025-07-01T00:00:00Z
2025-04-15 14:18:25.504 [http-nio-8080-exec-5] WARN  c.c.lab_1.service.ReportService - Ошибки валидации запроса отчета: Дата окончания не может быть в будущем
2025-04-15 14:18:25.504 [http-nio-8080-exec-5] WARN  c.c.lab_1.service.ReportService - Ошибка валидации запроса: Дата окончания не может быть в будущем
2025-04-15 14:18:25.505 [http-nio-8080-exec-5] ERROR c.c.l.controllers.ReportController - Ошибка при формировании отчета: Дата окончания не может быть в будущем
2025-04-15 14:18:25.507 [http-nio-8080-exec-5] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@2a4cc199} - {500} ({8} мс)
2025-04-15 14:18:25.507 [http-nio-8080-exec-5] WARN  c.c.l.configs.RequestLoggingFilter - Ответ с ошибкой {500}: {{"status":"ERROR","message":"ÐÐ°ÑÐ° Ð¾ÐºÐ¾Ð½ÑÐ°Ð½Ð¸Ñ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ Ð² Ð±ÑÐ´ÑÑÐµÐ¼","data":[]}}
2025-04-15 14:18:29.571 [http-nio-8080-exec-7] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса cea34bde-5af1-48b4-8762-fd19b8c5d2b6: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:18:29.571 [http-nio-8080-exec-7] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:18:29.580 [http-nio-8080-exec-7] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:18:29.581 [http-nio-8080-exec-7] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:18:29.582 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:18:29.582 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 14:18:29.583 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Свежий
2025-04-15 14:18:29.583 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Свежий
2025-04-15 14:18:29.591 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@5bfe7197
2025-04-15 14:18:29.693 [http-nio-8080-exec-7] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 14:18:29.789 [http-nio-8080-exec-7] ERROR c.c.lab_1.service.ReportService - Ошибка при поиске лекций в Elasticsearch: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47)
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182)
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:165)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readValue(MappingElasticsearchConverter.java:488)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readValue(MappingElasticsearchConverter.java:478)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader$ElasticsearchPropertyValueProvider.getPropertyValue(MappingElasticsearchConverter.java:712)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader$ElasticsearchPropertyValueProvider.getPropertyValue(MappingElasticsearchConverter.java:692)
	at org.springframework.data.mapping.model.PersistentEntityParameterValueProvider.getParameterValue(PersistentEntityParameterValueProvider.java:72)
	at org.springframework.data.mapping.model.ValueExpressionParameterValueProvider.getParameterValue(ValueExpressionParameterValueProvider.java:56)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator.extractInvocationArguments(ClassGeneratingEntityInstantiator.java:301)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator$EntityInstantiatorAdapter.createInstance(ClassGeneratingEntityInstantiator.java:273)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator.createInstance(ClassGeneratingEntityInstantiator.java:98)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readEntity(MappingElasticsearchConverter.java:352)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.read(MappingElasticsearchConverter.java:291)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.read(MappingElasticsearchConverter.java:250)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter.read(MappingElasticsearchConverter.java:187)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter.read(MappingElasticsearchConverter.java:93)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadDocumentCallback.doWith(AbstractElasticsearchTemplate.java:763)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadSearchDocumentResponseCallback.doWith(AbstractElasticsearchTemplate.java:799)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadSearchDocumentResponseCallback.doWith(AbstractElasticsearchTemplate.java:785)
	at org.springframework.data.elasticsearch.client.elc.ElasticsearchTemplate.doSearch(ElasticsearchTemplate.java:376)
	at org.springframework.data.elasticsearch.client.elc.ElasticsearchTemplate.search(ElasticsearchTemplate.java:362)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate.search(AbstractElasticsearchTemplate.java:453)
	at com.cherenkov.lab_1.service.ReportService.searchLecturesByTerm(ReportService.kt:208)
	at com.cherenkov.lab_1.service.ReportService.generateReport(ReportService.kt:46)
	at com.cherenkov.lab_1.controllers.ReportController.generateAttendanceReport(ReportController.kt:26)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:653)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:723)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.cherenkov.lab_1.configs.JwtAuthFilter.doFilterInternal(JwtAuthFilter.kt:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cherenkov.lab_1.configs.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.kt:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1623)
Caused by: java.time.format.DateTimeParseException: Text '2025-04-15 09:58:26' could not be parsed at index 10
	at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2106)
	at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2008)
	at java.base/java.time.Instant.parse(Instant.java:399)
	at org.springframework.data.convert.Jsr310Converters$StringToInstantConverter.convert(Jsr310Converters.java:321)
	at org.springframework.data.convert.Jsr310Converters$StringToInstantConverter.convert(Jsr310Converters.java:313)
	at org.springframework.core.convert.support.GenericConversionService$ConverterAdapter.convert(GenericConversionService.java:364)
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41)
	... 139 common frames omitted
2025-04-15 14:18:29.794 [http-nio-8080-exec-7] ERROR c.c.lab_1.service.ReportService - Ошибка доступа к Elasticsearch: Ошибка доступа к Elasticsearch: Ошибка при выполнении поиска: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
com.cherenkov.lab_1.exceptions.ElasticsearchAccessException: Ошибка доступа к Elasticsearch: Ошибка при выполнении поиска: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
	at com.cherenkov.lab_1.service.ReportService.searchLecturesByTerm(ReportService.kt:218)
	at com.cherenkov.lab_1.service.ReportService.generateReport(ReportService.kt:46)
	at com.cherenkov.lab_1.controllers.ReportController.generateAttendanceReport(ReportController.kt:26)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:653)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:723)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.cherenkov.lab_1.configs.JwtAuthFilter.doFilterInternal(JwtAuthFilter.kt:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cherenkov.lab_1.configs.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.kt:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1623)
Caused by: org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:47)
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:182)
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:165)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readValue(MappingElasticsearchConverter.java:488)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readValue(MappingElasticsearchConverter.java:478)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader$ElasticsearchPropertyValueProvider.getPropertyValue(MappingElasticsearchConverter.java:712)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader$ElasticsearchPropertyValueProvider.getPropertyValue(MappingElasticsearchConverter.java:692)
	at org.springframework.data.mapping.model.PersistentEntityParameterValueProvider.getParameterValue(PersistentEntityParameterValueProvider.java:72)
	at org.springframework.data.mapping.model.ValueExpressionParameterValueProvider.getParameterValue(ValueExpressionParameterValueProvider.java:56)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator.extractInvocationArguments(ClassGeneratingEntityInstantiator.java:301)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator$EntityInstantiatorAdapter.createInstance(ClassGeneratingEntityInstantiator.java:273)
	at org.springframework.data.mapping.model.ClassGeneratingEntityInstantiator.createInstance(ClassGeneratingEntityInstantiator.java:98)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.readEntity(MappingElasticsearchConverter.java:352)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.read(MappingElasticsearchConverter.java:291)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter$Reader.read(MappingElasticsearchConverter.java:250)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter.read(MappingElasticsearchConverter.java:187)
	at org.springframework.data.elasticsearch.core.convert.MappingElasticsearchConverter.read(MappingElasticsearchConverter.java:93)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadDocumentCallback.doWith(AbstractElasticsearchTemplate.java:763)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadSearchDocumentResponseCallback.doWith(AbstractElasticsearchTemplate.java:799)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate$ReadSearchDocumentResponseCallback.doWith(AbstractElasticsearchTemplate.java:785)
	at org.springframework.data.elasticsearch.client.elc.ElasticsearchTemplate.doSearch(ElasticsearchTemplate.java:376)
	at org.springframework.data.elasticsearch.client.elc.ElasticsearchTemplate.search(ElasticsearchTemplate.java:362)
	at org.springframework.data.elasticsearch.core.AbstractElasticsearchTemplate.search(AbstractElasticsearchTemplate.java:453)
	at com.cherenkov.lab_1.service.ReportService.searchLecturesByTerm(ReportService.kt:208)
	... 109 common frames omitted
Caused by: java.time.format.DateTimeParseException: Text '2025-04-15 09:58:26' could not be parsed at index 10
	at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2106)
	at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2008)
	at java.base/java.time.Instant.parse(Instant.java:399)
	at org.springframework.data.convert.Jsr310Converters$StringToInstantConverter.convert(Jsr310Converters.java:321)
	at org.springframework.data.convert.Jsr310Converters$StringToInstantConverter.convert(Jsr310Converters.java:313)
	at org.springframework.core.convert.support.GenericConversionService$ConverterAdapter.convert(GenericConversionService.java:364)
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41)
	... 139 common frames omitted
2025-04-15 14:18:29.796 [http-nio-8080-exec-7] ERROR c.c.l.controllers.ReportController - Ошибка при формировании отчета: Ошибка доступа к Elasticsearch: Ошибка при выполнении поиска: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]
2025-04-15 14:18:29.797 [http-nio-8080-exec-7] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@425451b8} - {500} ({226} мс)
2025-04-15 14:18:29.797 [http-nio-8080-exec-7] WARN  c.c.l.configs.RequestLoggingFilter - Ответ с ошибкой {500}: {{"status":"ERROR","message":"ÐÑÐ¸Ð±ÐºÐ° Ð´Ð¾ÑÑÑÐ¿Ð° Ðº Elasticsearch: ÐÑÐ¸Ð±ÐºÐ° Ð¿ÑÐ¸ Ð²ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð¿Ð¾Ð¸ÑÐºÐ°: Failed to convert from type [java.lang.String] to type [java.time.Instant] for value [2025-04-15 09:58:26]","data":[]}}
2025-04-15 14:19:32.641 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-15 14:19:32.643 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-04-15 14:19:32.765 [SpringApplicationShutdownHook] INFO  o.n.driver.internal.InternalDriver - Closing driver instance 311245180
2025-04-15 14:19:36.405 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Starting Lab1ApplicationKt using Java 20.0.2.1 with PID 3853 (/Users/nikitacerenkov/Downloads/lab_1/build/classes/kotlin/main started by nikitacerenkov in /Users/nikitacerenkov/Downloads/lab_1)
2025-04-15 14:19:36.406 [main] DEBUG c.cherenkov.lab_1.Lab1ApplicationKt - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-15 14:19:36.406 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-04-15 14:19:37.391 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-15 14:19:37.401 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-15 14:19:37.401 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-15 14:19:37.429 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-15 14:19:37.429 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 997 ms
2025-04-15 14:19:37.471 [main] DEBUG c.c.l.configs.RequestLoggingFilter - Filter 'requestLoggingFilter' configured for use
2025-04-15 14:19:37.471 [main] DEBUG c.c.lab_1.configs.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-04-15 14:19:37.532 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-15 14:19:37.532 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-04-15 14:19:38.263 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-04-15 14:19:38.681 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.2.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.3.2"}, "platform": "Java/Amazon.com Inc./20.0.2.1+10-FR"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@4c4be9d8, com.mongodb.Jep395RecordCodecProvider@21dd91da, com.mongodb.KotlinCodecProvider@1f251bf1]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-04-15 14:19:38.693 [cluster-ClusterId{value='67fe40caf83e9e45ad1943fa', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=13583459, minRoundTripTimeNanos=0}
2025-04-15 14:19:38.810 [main] INFO  o.n.driver.internal.DriverFactory - Direct driver instance 692760632 created for server address localhost:7687
2025-04-15 14:19:39.033 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-04-15 14:19:39.041 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Started Lab1ApplicationKt in 2.86 seconds (process running for 3.168)
2025-04-15 14:19:44.903 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-15 14:19:44.904 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-15 14:19:44.905 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-15 14:19:44.908 [http-nio-8080-exec-2] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 4383eef1-2c00-4262-9ff9-b8e0c50025e2: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:19:44.911 [http-nio-8080-exec-2] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:19:45.004 [http-nio-8080-exec-2] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@65893b08} - {403} ({94} мс)
2025-04-15 14:20:02.070 [http-nio-8080-exec-3] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 4ee3315a-888a-4a5b-b3c4-51945f9c9fff: пользователь=anonymous, метод=POST, uri=/api/auth/login
2025-04-15 14:20:02.071 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/api/auth/login}
2025-04-15 14:20:02.200 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@3315d2eb} - {200} ({129} мс)
2025-04-15 14:20:13.993 [http-nio-8080-exec-4] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса d37c841e-ff69-4f8a-b6f5-65b5944f1185: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:20:13.996 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:20:14.020 [http-nio-8080-exec-4] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:20:14.020 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:20:14.021 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:20:14.021 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 14:20:14.021 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Свежий
2025-04-15 14:20:14.021 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Свежий
2025-04-15 14:20:14.024 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@3fe6bdd8
2025-04-15 14:20:14.123 [http-nio-8080-exec-4] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 14:20:14.249 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 75 записей
2025-04-15 14:20:14.249 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 75 лекций по термину 'Свежий'
2025-04-15 14:20:14.249 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 75 лекций
2025-04-15 14:20:14.249 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [360, 790, 793, 259, 248, 214, 403, 476, 518, 632, 687, 611, 753, 74, 76, 537, 630, 783, 202, 215, 272, 774, 142, 173, 317, 353, 378, 431, 475, 689, 22, 231, 359, 368, 455, 468, 732, 741, 768, 30, 51, 325, 331, 396, 401, 683, 716, 727, 763, 31, 69, 89, 159, 160, 165, 167, 201, 280, 285, 426, 446, 488, 567, 600, 692, 711, 764, 778, 792, 801, 804, 82, 262, 301, 553], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 14:20:14.273 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 14:20:14.527 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.19.21 (Build date: 2025-03-11T08:47:49Z)
                                      
2025-04-15 14:20:14.527 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 

jOOQ tip of the day: In addition to <includes> and <excludes>, you can also use <includesSql> and <excludesSql> to generate regular expressions for the code generator! https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-includes-excludes/

2025-04-15 14:20:14.523 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    360, 790, 793, 259, 248, 214, 403, 476, 518, 632, 687, 611, 753, 74, 76, 537, 
    630, 783, 202, 215, 272, 774, 142, 173, 317, 353, 378, 431, 475, 689, 22, 231, 
    359, 368, 455, 468, 732, 741, 768, 30, 51, 325, 331, 396, 401, 683, 716, 727, 
    763, 31, 69, 89, 159, 160, 165, 167, 201, 280, 285, 426, 446, 488, 567, 600, 
    692, 711, 764, 778, 792, 801, 804, 82, 262, 301, 553
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 14:20:14.585 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 14:20:14.587 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (360, 790, 793, 259, 248, 214, 403, 476, 518, 632, 687, 611, 753, 74, 76, 537, 630, 783, 202, 215, 272, 774, 142, 173, 317, 353, 378, 431, 475, 689, 22, 231, 359, 368, 455, 468, 732, 741, 768, 30, 51, 325, 331, 396, 401, 683, 716, 727, 763, 31, 69, 89, 159, 160, 165, 167, 201, 280, 285, 426, 446, 488, 567, 600, 692, 711, 764, 778, 792, 801, 804, 82, 262, 301, 553) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 14:20:14.588 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-15 14:20:14.705 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@241b209
2025-04-15 14:20:14.706 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-15 14:20:14.712 [http-nio-8080-exec-4] INFO  o.j.i.D.logVersionSupport - Version                  : Database version is supported by dialect POSTGRES: 17.4 (Debian 17.4-1.pgdg120+2)
2025-04-15 14:20:14.753 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 14:20:14.753 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 14:20:14.753 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 14:20:14.753 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 14:20:14.754 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:20:14.754 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:20:14.754 [http-nio-8080-exec-4] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:20:14.754 [http-nio-8080-exec-4] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:20:14.911 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@781c7967} - {200} ({916} мс)
2025-04-15 14:21:22.653 [http-nio-8080-exec-7] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 8789dd14-1c74-4a4c-b0d9-ae5730901c2f: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:21:22.655 [http-nio-8080-exec-7] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:21:22.665 [http-nio-8080-exec-7] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term= , startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term= , startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] WARN  c.c.lab_1.service.ReportService - Пустой поисковый запрос в запросе отчета
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] WARN  c.c.lab_1.service.ReportService - Ошибки валидации запроса отчета: Поисковый запрос не может быть пустым
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] WARN  c.c.lab_1.service.ReportService - Ошибка валидации запроса: Поисковый запрос не может быть пустым
2025-04-15 14:21:22.666 [http-nio-8080-exec-7] ERROR c.c.l.controllers.ReportController - Ошибка при формировании отчета: Поисковый запрос не может быть пустым
2025-04-15 14:21:22.667 [http-nio-8080-exec-7] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@40cec9da} - {500} ({13} мс)
2025-04-15 14:21:22.668 [http-nio-8080-exec-7] WARN  c.c.l.configs.RequestLoggingFilter - Ответ с ошибкой {500}: {{"status":"ERROR","message":"ÐÐ¾Ð¸ÑÐºÐ¾Ð²ÑÐ¹ Ð·Ð°Ð¿ÑÐ¾Ñ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ Ð¿ÑÑÑÑÐ¼","data":[]}}
2025-04-15 14:21:32.315 [http-nio-8080-exec-8] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 57bed810-953b-4d67-ada5-0c0642e2abe7: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:21:32.315 [http-nio-8080-exec-8] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:21:32.318 [http-nio-8080-exec-8] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=в, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=в, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: в
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: в
2025-04-15 14:21:32.320 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@3660d5eb
2025-04-15 14:21:32.329 [http-nio-8080-exec-8] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 14:21:32.330 [http-nio-8080-exec-8] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 0 записей
2025-04-15 14:21:32.330 [http-nio-8080-exec-8] INFO  c.c.lab_1.service.ReportService - Найдено 0 лекций по термину 'в'
2025-04-15 14:21:32.330 [http-nio-8080-exec-8] WARN  c.c.lab_1.service.ReportService - Не найдено лекций по термину: в
2025-04-15 14:21:32.330 [http-nio-8080-exec-8] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено лекций по указанному термину
2025-04-15 14:21:32.332 [http-nio-8080-exec-8] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@38a73d57} - {200} ({17} мс)
2025-04-15 14:21:48.952 [http-nio-8080-exec-10] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 57bf4b4d-5344-4a2a-8a05-6b068a241d30: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:21:48.955 [http-nio-8080-exec-10] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:21:48.965 [http-nio-8080-exec-10] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=коммунизм, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=коммунизм, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: коммунизм
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: коммунизм
2025-04-15 14:21:48.966 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@5d382041
2025-04-15 14:21:48.994 [http-nio-8080-exec-10] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 14:21:49.009 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 75 записей
2025-04-15 14:21:49.010 [http-nio-8080-exec-10] INFO  c.c.lab_1.service.ReportService - Найдено 75 лекций по термину 'коммунизм'
2025-04-15 14:21:49.010 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 75 лекций
2025-04-15 14:21:49.010 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [609, 287, 289, 467, 117, 657, 92, 733, 478, 641, 653, 693, 85, 310, 371, 550, 627, 652, 676, 12, 806, 83, 263, 288, 332, 340, 378, 736, 790, 33, 233, 309, 316, 359, 372, 455, 474, 732, 30, 78, 88, 134, 137, 321, 383, 389, 398, 491, 495, 589, 683, 743, 16, 44, 93, 125, 148, 198, 220, 251, 366, 377, 412, 414, 486, 522, 571, 640, 698, 705, 779, 339, 451, 713, 766], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 14:21:49.011 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 14:21:49.013 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    609, 287, 289, 467, 117, 657, 92, 733, 478, 641, 653, 693, 85, 310, 371, 550, 
    627, 652, 676, 12, 806, 83, 263, 288, 332, 340, 378, 736, 790, 33, 233, 309, 
    316, 359, 372, 455, 474, 732, 30, 78, 88, 134, 137, 321, 383, 389, 398, 491, 
    495, 589, 683, 743, 16, 44, 93, 125, 148, 198, 220, 251, 366, 377, 412, 414, 
    486, 522, 571, 640, 698, 705, 779, 339, 451, 713, 766
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 14:21:49.022 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 14:21:49.023 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (609, 287, 289, 467, 117, 657, 92, 733, 478, 641, 653, 693, 85, 310, 371, 550, 627, 652, 676, 12, 806, 83, 263, 288, 332, 340, 378, 736, 790, 33, 233, 309, 316, 359, 372, 455, 474, 732, 30, 78, 88, 134, 137, 321, 383, 389, 398, 491, 495, 589, 683, 743, 16, 44, 93, 125, 148, 198, 220, 251, 366, 377, 412, 414, 486, 522, 571, 640, 698, 705, 779, 339, 451, 713, 766) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:21:49.034 [http-nio-8080-exec-10] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:21:49.035 [http-nio-8080-exec-10] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@12c2cfad} - {200} ({81} мс)
2025-04-15 14:22:44.573 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-15 14:22:44.576 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-04-15 14:22:44.704 [SpringApplicationShutdownHook] INFO  o.n.driver.internal.InternalDriver - Closing driver instance 692760632
2025-04-15 14:22:44.927 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-15 14:22:44.929 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-15 14:33:01.053 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Starting Lab1ApplicationKt using Java 20.0.2.1 with PID 4025 (/Users/nikitacerenkov/Downloads/lab_1/build/classes/kotlin/main started by nikitacerenkov in /Users/nikitacerenkov/Downloads/lab_1)
2025-04-15 14:33:01.054 [main] DEBUG c.cherenkov.lab_1.Lab1ApplicationKt - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-15 14:33:01.054 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-04-15 14:33:02.033 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-15 14:33:02.042 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-15 14:33:02.042 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-15 14:33:02.069 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-15 14:33:02.069 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 989 ms
2025-04-15 14:33:02.115 [main] DEBUG c.c.l.configs.RequestLoggingFilter - Filter 'requestLoggingFilter' configured for use
2025-04-15 14:33:02.115 [main] DEBUG c.c.lab_1.configs.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-04-15 14:33:02.168 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-15 14:33:02.169 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-04-15 14:33:02.919 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-04-15 14:33:03.353 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.2.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.3.2"}, "platform": "Java/Amazon.com Inc./20.0.2.1+10-FR"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@1f251bf1, com.mongodb.Jep395RecordCodecProvider@502b9399, com.mongodb.KotlinCodecProvider@433db56d]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-04-15 14:33:03.362 [cluster-ClusterId{value='67fe43ef1307b536090c92b5', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=12131000, minRoundTripTimeNanos=0}
2025-04-15 14:33:03.475 [main] INFO  o.n.driver.internal.DriverFactory - Direct driver instance 962248325 created for server address localhost:7687
2025-04-15 14:33:03.696 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-04-15 14:33:03.704 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Started Lab1ApplicationKt in 2.873 seconds (process running for 3.271)
2025-04-15 14:33:52.581 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-15 14:33:52.582 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-15 14:33:52.583 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-15 14:33:52.586 [http-nio-8080-exec-1] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса cd38ead9-15d9-436d-81a7-4c2a0c14e64a: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:33:52.588 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:33:52.677 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@3f399d5a} - {403} ({90} мс)
2025-04-15 14:33:56.995 [http-nio-8080-exec-3] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 568bf21d-0b01-4ef5-b566-64e965d79f03: пользователь=anonymous, метод=POST, uri=/api/auth/login
2025-04-15 14:33:56.996 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/api/auth/login}
2025-04-15 14:33:57.129 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@7d832dbe} - {200} ({133} мс)
2025-04-15 14:34:10.972 [http-nio-8080-exec-4] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса cf07dbe3-ab07-44d2-b61c-9c1f4ee17cf6: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 14:34:10.974 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 14:34:11.003 [http-nio-8080-exec-4] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Смеяться, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:34:11.003 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Смеяться, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 14:34:11.004 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 14:34:11.004 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 14:34:11.004 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Смеяться
2025-04-15 14:34:11.004 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Смеяться
2025-04-15 14:34:11.007 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@663bbfd9
2025-04-15 14:34:11.101 [http-nio-8080-exec-4] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 14:34:11.206 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 91 записей
2025-04-15 14:34:11.206 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 91 лекций по термину 'Смеяться'
2025-04-15 14:34:11.206 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 91 лекций
2025-04-15 14:34:11.206 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [731, 127, 137, 386, 161, 476, 541, 326, 400, 480, 664, 9, 37, 68, 274, 282, 704, 723, 34, 182, 313, 371, 648, 70, 118, 241, 249, 253, 352, 424, 135, 189, 194, 217, 257, 431, 532, 703, 720, 746, 769, 1, 156, 172, 175, 223, 582, 710, 741, 742, 4, 147, 154, 203, 228, 398, 420, 438, 533, 615, 678, 679, 697, 31, 44, 121, 174, 196, 251, 283, 285, 337, 356, 362, 384, 426, 439, 469, 486, 493, 570, 607, 681, 725, 776, 791, 796, 262, 301, 573, 583], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 14:34:11.230 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 14:34:11.481 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.19.21 (Build date: 2025-03-11T08:47:49Z)
                                      
2025-04-15 14:34:11.481 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 

jOOQ tip of the day: If you're using Liquibase to migrate your schema, the jOOQ code generator can simulate a Liquibase migration to produce its generated code, rather than connecting to an actual database: https://www.jooq.org/doc/latest/manual/code-generation/codegen-liquibase/

2025-04-15 14:34:11.477 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    731, 127, 137, 386, 161, 476, 541, 326, 400, 480, 664, 9, 37, 68, 274, 282, 
    704, 723, 34, 182, 313, 371, 648, 70, 118, 241, 249, 253, 352, 424, 135, 189, 
    194, 217, 257, 431, 532, 703, 720, 746, 769, 1, 156, 172, 175, 223, 582, 710, 
    741, 742, 4, 147, 154, 203, 228, 398, 420, 438, 533, 615, 678, 679, 697, 31, 
    44, 121, 174, 196, 251, 283, 285, 337, 356, 362, 384, 426, 439, 469, 486, 493, 
    570, 607, 681, 725, 776, 791, 796, 262, 301, 573, 583
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 14:34:11.560 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 14:34:11.562 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (731, 127, 137, 386, 161, 476, 541, 326, 400, 480, 664, 9, 37, 68, 274, 282, 704, 723, 34, 182, 313, 371, 648, 70, 118, 241, 249, 253, 352, 424, 135, 189, 194, 217, 257, 431, 532, 703, 720, 746, 769, 1, 156, 172, 175, 223, 582, 710, 741, 742, 4, 147, 154, 203, 228, 398, 420, 438, 533, 615, 678, 679, 697, 31, 44, 121, 174, 196, 251, 283, 285, 337, 356, 362, 384, 426, 439, 469, 486, 493, 570, 607, 681, 725, 776, 791, 796, 262, 301, 573, 583) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 14:34:11.563 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-15 14:34:11.664 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62f50b4a
2025-04-15 14:34:11.665 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-15 14:34:11.670 [http-nio-8080-exec-4] INFO  o.j.i.D.logVersionSupport - Version                  : Database version is supported by dialect POSTGRES: 17.4 (Debian 17.4-1.pgdg120+2)
2025-04-15 14:34:11.710 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:34:11.711 [http-nio-8080-exec-4] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 14:34:11.863 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@5001d178} - {200} ({890} мс)
2025-04-15 14:34:31.353 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-15 14:34:31.355 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-04-15 14:34:31.477 [SpringApplicationShutdownHook] INFO  o.n.driver.internal.InternalDriver - Closing driver instance 962248325
2025-04-15 14:34:31.698 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-15 14:34:31.699 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-15 15:27:19.730 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Starting Lab1ApplicationKt using Java 20.0.2.1 with PID 4835 (/Users/nikitacerenkov/Downloads/lab_1/build/classes/kotlin/main started by nikitacerenkov in /Users/nikitacerenkov/Downloads/lab_1)
2025-04-15 15:27:19.731 [main] DEBUG c.cherenkov.lab_1.Lab1ApplicationKt - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-15 15:27:19.731 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-04-15 15:27:20.726 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-15 15:27:20.734 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-15 15:27:20.734 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-15 15:27:20.761 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-15 15:27:20.761 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1004 ms
2025-04-15 15:27:20.808 [main] DEBUG c.c.l.configs.RequestLoggingFilter - Filter 'requestLoggingFilter' configured for use
2025-04-15 15:27:20.808 [main] DEBUG c.c.lab_1.configs.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-04-15 15:27:20.862 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-15 15:27:20.862 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-04-15 15:27:21.626 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-04-15 15:27:22.096 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.2.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.3.2"}, "platform": "Java/Amazon.com Inc./20.0.2.1+10-FR"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3555d804, com.mongodb.Jep395RecordCodecProvider@19b8f1bd, com.mongodb.KotlinCodecProvider@46a9c368]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-04-15 15:27:22.106 [cluster-ClusterId{value='67fe50aaccf0c21e500ccb01', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=12759875, minRoundTripTimeNanos=0}
2025-04-15 15:27:22.228 [main] INFO  o.n.driver.internal.DriverFactory - Direct driver instance 645018917 created for server address localhost:7687
2025-04-15 15:27:22.467 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-04-15 15:27:22.476 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Started Lab1ApplicationKt in 2.991 seconds (process running for 3.449)
2025-04-15 15:27:30.594 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-15 15:27:30.594 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-15 15:27:30.595 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-15 15:27:30.598 [http-nio-8080-exec-1] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 4eb1f804-aa51-40c3-b01b-b230025ceabe: пользователь=anonymous, метод=POST, uri=/api/auth/login
2025-04-15 15:27:30.601 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/api/auth/login}
2025-04-15 15:27:30.793 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@19d1b6ff} - {200} ({193} мс)
2025-04-15 15:27:45.690 [http-nio-8080-exec-3] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 79501f81-b46c-4acd-a20d-e1094ae4fdcd: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 15:27:45.691 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 15:27:45.750 [http-nio-8080-exec-3] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Смеяться, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:27:45.750 [http-nio-8080-exec-3] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Смеяться, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:27:45.750 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 15:27:45.751 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 15:27:45.751 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Смеяться
2025-04-15 15:27:45.751 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Смеяться
2025-04-15 15:27:45.754 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@48d7c7f2
2025-04-15 15:27:45.870 [http-nio-8080-exec-3] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 15:27:45.974 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 5 записей
2025-04-15 15:27:45.974 [http-nio-8080-exec-3] INFO  c.c.lab_1.service.ReportService - Найдено 5 лекций по термину 'Смеяться'
2025-04-15 15:27:45.974 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 5 лекций
2025-04-15 15:27:45.974 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [31, 135, 185, 191, 176], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 15:27:45.999 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 15:27:46.255 [http-nio-8080-exec-3] INFO  org.jooq.Constants - 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.19.21 (Build date: 2025-03-11T08:47:49Z)
                                      
2025-04-15 15:27:46.256 [http-nio-8080-exec-3] INFO  org.jooq.Constants - 

jOOQ tip of the day: You can nest collections directly in SQL using jOOQ's SQL/XML or SQL/JSON support: https://blog.jooq.org/nesting-collections-with-jooq-3-14s-sql-xml-or-sql-json-support/

2025-04-15 15:27:46.251 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    31, 135, 185, 191, 176
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 15:27:46.314 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 15:27:46.316 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (31, 135, 185, 191, 176) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 15:27:46.316 [http-nio-8080-exec-3] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-15 15:27:46.439 [http-nio-8080-exec-3] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@68ccd269
2025-04-15 15:27:46.440 [http-nio-8080-exec-3] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-15 15:27:46.446 [http-nio-8080-exec-3] INFO  o.j.i.D.logVersionSupport - Version                  : Database version is supported by dialect POSTGRES: 17.4 (Debian 17.4-1.pgdg120+2)
2025-04-15 15:27:46.486 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 15:27:46.486 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 15:27:46.486 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 15:27:46.486 [http-nio-8080-exec-3] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 15:27:46.487 [http-nio-8080-exec-3] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:27:46.487 [http-nio-8080-exec-3] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:27:46.487 [http-nio-8080-exec-3] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:27:46.487 [http-nio-8080-exec-3] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:27:46.642 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@45373915} - {200} ({951} мс)
2025-04-15 15:28:14.195 [http-nio-8080-exec-4] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 04e2f5b8-f642-46af-b3dc-64db073e39e6: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 15:28:14.197 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 15:28:14.201 [http-nio-8080-exec-4] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Свежий
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Свежий
2025-04-15 15:28:14.202 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@45b532dc
2025-04-15 15:28:14.224 [http-nio-8080-exec-4] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 15:28:14.228 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 5 записей
2025-04-15 15:28:14.228 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 5 лекций по термину 'Свежий'
2025-04-15 15:28:14.228 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 5 лекций
2025-04-15 15:28:14.228 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [100, 51, 97, 3, 40], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 15:28:14.229 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 15:28:14.229 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    100, 51, 97, 3, 40
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 15:28:14.234 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 15:28:14.237 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (100, 51, 97, 3, 40) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:28:14.243 [http-nio-8080-exec-4] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:28:14.244 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@4b72d41a} - {200} ({47} мс)
2025-04-15 15:28:43.924 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-15 15:28:43.927 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-04-15 15:28:44.046 [SpringApplicationShutdownHook] INFO  o.n.driver.internal.InternalDriver - Closing driver instance 645018917
2025-04-15 15:28:44.265 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-15 15:28:44.267 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-15 15:43:33.258 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Starting Lab1ApplicationKt using Java 20.0.2.1 with PID 5065 (/Users/nikitacerenkov/Downloads/lab_1/build/classes/kotlin/main started by nikitacerenkov in /Users/nikitacerenkov/Downloads/lab_1)
2025-04-15 15:43:33.259 [main] DEBUG c.cherenkov.lab_1.Lab1ApplicationKt - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-04-15 15:43:33.259 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - No active profile set, falling back to 1 default profile: "default"
2025-04-15 15:43:34.298 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-15 15:43:34.306 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-15 15:43:34.307 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-15 15:43:34.333 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-15 15:43:34.333 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1047 ms
2025-04-15 15:43:34.374 [main] DEBUG c.c.l.configs.RequestLoggingFilter - Filter 'requestLoggingFilter' configured for use
2025-04-15 15:43:34.374 [main] DEBUG c.c.lab_1.configs.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-04-15 15:43:34.429 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-15 15:43:34.429 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-04-15 15:43:35.218 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-04-15 15:43:35.688 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.2.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "15.3.2"}, "platform": "Java/Amazon.com Inc./20.0.2.1+10-FR"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@396ec737, com.mongodb.Jep395RecordCodecProvider@35d53cd8, com.mongodb.KotlinCodecProvider@1bed61d2]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-04-15 15:43:35.703 [cluster-ClusterId{value='67fe5477ad4763186325ade4', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=17676042, minRoundTripTimeNanos=0}
2025-04-15 15:43:35.817 [main] INFO  o.n.driver.internal.DriverFactory - Direct driver instance 1434751602 created for server address localhost:7687
2025-04-15 15:43:36.060 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-04-15 15:43:36.069 [main] INFO  c.cherenkov.lab_1.Lab1ApplicationKt - Started Lab1ApplicationKt in 3.035 seconds (process running for 3.401)
2025-04-15 15:43:39.694 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-15 15:43:39.695 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-15 15:43:39.696 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-15 15:43:39.704 [http-nio-8080-exec-1] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 5e0e9a6b-0ce9-4414-a3ff-7497f91e8c11: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 15:43:39.706 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 15:43:39.793 [http-nio-8080-exec-1] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@2f0a783f} - {403} ({88} мс)
2025-04-15 15:43:42.999 [http-nio-8080-exec-3] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса 9fcb5092-ffe7-4dbd-ae50-5e3d047e780b: пользователь=anonymous, метод=POST, uri=/api/auth/login
2025-04-15 15:43:43.001 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/api/auth/login}
2025-04-15 15:43:43.130 [http-nio-8080-exec-3] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@366e48c2} - {200} ({130} мс)
2025-04-15 15:43:53.783 [http-nio-8080-exec-4] DEBUG c.cherenkov.lab_1.utils.LoggingUtils - Настроен контекст логирования для запроса ac9fc35f-3a78-4675-ad27-9e79c6843d3e: пользователь=anonymous, метод=POST, uri=/reports/attendance
2025-04-15 15:43:53.784 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - >>> {POST} {/reports/attendance}
2025-04-15 15:43:53.807 [http-nio-8080-exec-4] INFO  c.c.l.controllers.ReportController - Получен запрос на формирование отчета о посещаемости: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:43:53.807 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Начало генерации отчета с параметрами: term=Свежий, startDate=2025-01-01T00:00:00Z, endDate=2025-04-01T00:00:00Z
2025-04-15 15:43:53.807 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета
2025-04-15 15:43:53.808 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Валидация параметров запроса отчета успешно пройдена
2025-04-15 15:43:53.808 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск лекций по термину: Свежий
2025-04-15 15:43:53.808 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение поиска в Elasticsearch по термину: Свежий
2025-04-15 15:43:53.810 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Запрос к Elasticsearch: org.springframework.data.elasticsearch.core.query.CriteriaQuery@35676adc
2025-04-15 15:43:53.919 [http-nio-8080-exec-4] WARN  org.elasticsearch.client.RestClient - request [POST http://localhost:9200/lectures/_search?search_type=query_then_fetch&typed_keys=true] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd "Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security."]
2025-04-15 15:43:54.025 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Результат поиска в Elasticsearch: найдено 26 записей
2025-04-15 15:43:54.025 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 26 лекций по термину 'Свежий'
2025-04-15 15:43:54.025 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью для 26 лекций
2025-04-15 15:43:54.025 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Поиск студентов с низкой посещаемостью. Лекции: [1, 901, 35, 185, 600, 1497, 415, 450, 1380, 1569, 1027, 1110, 1126, 1458, 1541, 1788, 481, 1088, 1205, 1771, 336, 374, 704, 1431, 115, 1258], период: 2025-01-01T00:00:00Z - 2025-04-01T00:00:00Z
2025-04-15 15:43:54.051 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Период для запроса: 2025-01-01T03:00 - 2025-04-01T03:00
2025-04-15 15:43:54.303 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.19.21 (Build date: 2025-03-11T08:47:49Z)
                                      
2025-04-15 15:43:54.304 [http-nio-8080-exec-4] INFO  org.jooq.Constants - 

jOOQ tip of the day: When it comes to using Converter or Binding, only the first UNION subquery is relevant. Learn more about this here: https://blog.jooq.org/how-to-use-jooqs-converters-with-union-operations/

2025-04-15 15:43:54.299 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Выполнение SQL-запроса для поиска посещаемости: select
  "a"."id_student",
  count(*) as "total",
  sum(case
    when "a"."status" then 1
    else 0
  end) as "attended",
  ((sum(case
    when "a"."status" then 1
    else 0
  end) * cast(1E2 as double precision)) / count(*)) as "percentage"
from "public"."attendance" as "a"
  join "public"."schedule" as "s"
    on "a"."id_schedule" = "s"."id"
where (
  "s"."id_lecture" in (
    1, 901, 35, 185, 600, 1497, 415, 450, 1380, 1569, 1027, 1110, 1126, 1458, 1541, 
    1788, 481, 1088, 1205, 1771, 336, 374, 704, 1431, 115, 1258
  )
  and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0'
)
group by "a"."id_student"
order by percentage asc
fetch next 10 rows only
2025-04-15 15:43:54.361 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Executing query          : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then ? else ? end) as "attended", ((sum(case when "a"."status" then ? else ? end) * cast(? as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) and "s"."timestamp" between cast(? as timestamp(6)) and cast(? as timestamp(6))) group by "a"."id_student" order by percentage asc fetch next ? rows only
2025-04-15 15:43:54.363 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - -> with bind values      : select "a"."id_student", count(*) as "total", sum(case when "a"."status" then 1 else 0 end) as "attended", ((sum(case when "a"."status" then 1 else 0 end) * cast(1E2 as double precision)) / count(*)) as "percentage" from "public"."attendance" as "a" join "public"."schedule" as "s" on "a"."id_schedule" = "s"."id" where ("s"."id_lecture" in (1, 901, 35, 185, 600, 1497, 415, 450, 1380, 1569, 1027, 1110, 1126, 1458, 1541, 1788, 481, 1088, 1205, 1771, 336, 374, 704, 1431, 115, 1258) and "s"."timestamp" between timestamp '2025-01-01 03:00:00.0' and timestamp '2025-04-01 03:00:00.0') group by "a"."id_student" order by percentage asc fetch next 10 rows only
2025-04-15 15:43:54.364 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-15 15:43:54.478 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6a30c0e7
2025-04-15 15:43:54.479 [http-nio-8080-exec-4] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-15 15:43:54.485 [http-nio-8080-exec-4] INFO  o.j.i.D.logVersionSupport - Version                  : Database version is supported by dialect POSTGRES: 17.4 (Debian 17.4-1.pgdg120+2)
2025-04-15 15:43:54.523 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched result           : +----------+-----+--------+----------+
2025-04-15 15:43:54.523 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : |id_student|total|attended|percentage|
2025-04-15 15:43:54.523 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener -                          : +----------+-----+--------+----------+
2025-04-15 15:43:54.523 [http-nio-8080-exec-4] DEBUG org.jooq.tools.LoggerListener - Fetched row(s)           : 0
2025-04-15 15:43:54.524 [http-nio-8080-exec-4] DEBUG c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:43:54.524 [http-nio-8080-exec-4] INFO  c.c.lab_1.service.ReportService - Найдено 0 студентов с низкой посещаемостью
2025-04-15 15:43:54.524 [http-nio-8080-exec-4] WARN  c.c.lab_1.service.ReportService - Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:43:54.524 [http-nio-8080-exec-4] WARN  c.c.l.controllers.ReportController - Отчет сформирован с предупреждениями: Не найдено студентов с низкой посещаемостью для указанного периода
2025-04-15 15:43:54.679 [http-nio-8080-exec-4] INFO  c.c.l.configs.RequestLoggingFilter - <<< {org.apache.catalina.connector.ResponseFacade@50910db6} - {200} ({895} мс)
2025-04-15 15:54:33.968 [cluster-ClusterId{value='67fe5477ad4763186325ade4', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server localhost:27017
com.mongodb.MongoNodeIsRecoveringException: Command failed with error 11600 (InterruptedAtShutdown): 'interrupted at shutdown' on server localhost:27017. The full response is {"ok": 0.0, "errmsg": "interrupted at shutdown", "code": 11600, "codeName": "InterruptedAtShutdown"}
	at com.mongodb.internal.connection.ProtocolHelper.createSpecialException(ProtocolHelper.java:264)
	at com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:206)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:520)
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:469)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:249)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
2025-04-15 15:54:43.991 [cluster-ClusterId{value='67fe5477ad4763186325ade4', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server localhost:27017
com.mongodb.MongoSocketOpenException: Exception opening socket
	at com.mongodb.internal.connection.SocketStream.lambda$open$0(SocketStream.java:85)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:85)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:233)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:673)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:590)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:666)
	at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:76)
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:104)
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:79)
	... 3 common frames omitted
2025-04-15 16:02:11.215 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-15 16:02:11.219 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-04-15 16:02:11.346 [SpringApplicationShutdownHook] INFO  o.n.driver.internal.InternalDriver - Closing driver instance 1434751602
2025-04-15 16:02:11.566 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-15 16:02:11.572 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
