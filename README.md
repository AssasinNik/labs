# Учебная система микросервисов

Данный проект представляет собой комплексную микросервисную архитектуру для образовательной системы. Система состоит из API Gateway и трех микросервисов (lab_1, lab_2, lab_3), взаимодействующих с различными базами данных.

## Технологии

- **Backend**: Kotlin, Spring Boot, Spring WebFlux, Spring Cloud Gateway
- **Базы данных**: 
  - PostgreSQL (реляционные данные)
  - Redis (кэширование)
  - MongoDB (документы)
  - Elasticsearch (поиск)
  - Neo4j (графовые данные)
- **Контейнеры**: Docker, Docker Compose

## Архитектура

Проект включает следующие компоненты:

1. **API Gateway** - единая точка входа для всех запросов к микросервисам
2. **Lab_1** - сервис для управления авторизацией и отчетами о посещаемости
3. **Lab_2** - сервис для управления курсами
4. **Lab_3** - сервис для управления группами
5. **Python Script** - скрипт для генерации тестовых данных

## Требования для запуска

- Docker и Docker Compose
- Минимум 8 ГБ оперативной памяти
- Свободные порты: 8080, 8081, 8082, 8083, 5433, 6379, 27017, 7474, 7687, 9200, 9300

## Запуск проекта

### Использование скрипта (рекомендуется)

Самый простой способ запустить проект - использовать предоставленный скрипт:

```bash
./run.sh
```

Для полного перезапуска с очисткой всех данных:

```bash
./run.sh --clean
```

### Ручной запуск

Альтернативно, вы можете запустить проект вручную:

```bash
# 1. Запуск инфраструктуры (базы данных)
docker-compose -f docker-compose-infra.yml up -d

# 2. Дождитесь завершения скрипта генерации данных

# 3. Запуск микросервисов
docker-compose -f docker-compose-services.yml up -d

# Просмотр логов инфраструктуры
docker-compose -f docker-compose-infra.yml logs -f [service_name]

# Просмотр логов сервисов
docker-compose -f docker-compose-services.yml logs -f [service_name]

# Остановка всех сервисов
docker-compose -f docker-compose-services.yml down
docker-compose -f docker-compose-infra.yml down
```

## Порядок запуска

Сервисы будут запущены в следующем порядке:

1. Базы данных (PostgreSQL, Redis, MongoDB, Elasticsearch, Neo4j)
2. Скрипт генерации данных (python-script)
3. Микросервисы по порядку: lab1 → lab2 → lab3
4. API Gateway

## Доступ к API

После успешного запуска, API будет доступно по адресу:

- Gateway: http://localhost:8080

## Структура проекта

- `docker-compose-infra.yml` - конфигурация для запуска баз данных и скрипта генерации данных
- `docker-compose-services.yml` - конфигурация для запуска микросервисов
- `run.sh` - скрипт для последовательного запуска всех компонентов системы

## Разработка для macOS M1/M2/M3

Проект адаптирован для запуска на macOS с чипами Apple Silicon (M1/M2/M3). Используется опция `platform: linux/amd64` для совместимости образов. 